<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Juego Táctil</title>
  <style>
    /* CSS */
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #222;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      background-color: #111;
    }

    #controls {
      position: absolute;
      bottom: 10%;
      display: flex;
      justify-content: space-evenly;
      width: 100%;
      z-index: 10;
    }

    .control-btn {
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      padding: 15px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .control-btn:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }

    @media (orientation: landscape) {
      #controls {
        flex-direction: row;
        justify-content: space-between;
        padding: 20px;
      }

      .control-btn {
        font-size: 5vw;
        width: 20vw;
        height: 10vh;
      }
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <div id="controls">
    <button id="moveLeft" class="control-btn">Izquierda</button>
    <button id="moveRight" class="control-btn">Derecha</button>
    <button id="jump" class="control-btn">Saltar</button>
    <button id="shoot" class="control-btn">Disparar</button>
  </div>

  <script>
    // JavaScript
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Variables de jugador y controles
    let player = { x: canvas.width / 2, y: canvas.height - 100, width: 50, height: 50 };
    let movingLeft = false, movingRight = false, jumping = false, shooting = false;

    // Actualizar el tamaño del canvas al redimensionarlo
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    // Mover al jugador
    function movePlayer() {
      if (movingLeft && player.x > 0) {
        player.x -= 5;
      }
      if (movingRight && player.x + player.width < canvas.width) {
        player.x += 5;
      }
    }

    // Disparar
    function shoot() {
      if (shooting) {
        // Aquí se puede agregar la lógica para disparar
        console.log('Disparando');
      }
    }

    // Dibujar jugador
    function drawPlayer() {
      ctx.fillStyle = 'red';
      ctx.fillRect(player.x, player.y, player.width, player.height);
    }

    // Detectar toques en la pantalla
    function touchHandler(event) {
      const touchX = event.changedTouches[0].clientX;
      const touchY = event.changedTouches[0].clientY;

      if (touchY > canvas.height * 0.7) {
        if (touchX < canvas.width / 2) {
          movingLeft = true;
          movingRight = false;
        } else {
          movingRight = true;
          movingLeft = false;
        }
      } else if (touchY < canvas.height * 0.3) {
        jumping = true;
        console.log('Saltar');
      }

      if (touchY > canvas.height * 0.8) {
        shooting = true;
      }
    }

    function touchEndHandler(event) {
      movingLeft = false;
      movingRight = false;
      jumping = false;
      shooting = false;
    }

    // Configurar eventos táctiles
    canvas.addEventListener('touchstart', touchHandler);
    canvas.addEventListener('touchend', touchEndHandler);

    // Función de actualización del juego
    function updateGame() {
      movePlayer();
      shoot();
      ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpiar el canvas
      drawPlayer(); // Dibujar al jugador
      requestAnimationFrame(updateGame); // Llamar nuevamente a la función para mantener el juego en ejecución
    }

    // Redimensionar canvas al cambiar el tamaño de la ventana
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas(); // Inicializar el tamaño del canvas

    updateGame(); // Iniciar el juego
  </script>
</body>
</html>
